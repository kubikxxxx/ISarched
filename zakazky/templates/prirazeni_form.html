{% load static %}
<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Upravit přiřazení</title>
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <style>
        body {
            padding: 30px;
            background: #f8f9fa;
        }

        .form-container {
            background: white;
            padding: 2rem;
            border-radius: .5rem;
            max-width: 700px;
            margin: auto;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body>
<div class="form-container">
    <h2 class="mb-4">Upravit přiřazení
        zaměstnance: {{ prirazeni.zamestnanec.jmeno }} {{ prirazeni.zamestnanec.prijmeni }}</h2>

    <form method="post">
        {% csrf_token %}

        <div class="mb-3">
            <label for="zamestnanec" class="form-label">Zaměstnanec:</label>
            <select name="zamestnanec" id="zamestnanec" class="form-select" required>
                {% for zam in zamestnanci %}
                    <option value="{{ zam.id }}" {% if zam.id == prirazeni.zamestnanec.id %}selected{% endif %}>
                        {{ zam.jmeno }} {{ zam.prijmeni }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label for="hodiny" class="form-label">Počet přidělených hodin:</label>
            <input type="number" name="hodiny" id="hodiny" min="0" required class="form-control"
                   value="{{ prirazeni.prideleno_hodin }}">
        </div>

        <div class="mb-3">
            <label for="premie_predpoklad" class="form-label">Prémie (odhad Kč):</label>
            <input type="number" step="0.01" name="premie_predpoklad" id="premie_predpoklad"
                   class="form-control" required value="{{ prirazeni.premie_predpoklad }}">
        </div>

        <div class="mb-3">
            <label for="premie_skutecnost" class="form-label">Prémie (skutečnost Kč):</label>
            <input type="number" step="0.01" name="premie_skutecnost" id="premie_skutecnost"
                   class="form-control" value="{{ prirazeni.premie_skutecnost }}">
        </div>

        <div class="mb-3">
            <label for="datum_prideleni" class="form-label">Datum přidělení:</label>
            <input type="date" name="datum_prideleni" id="datum_prideleni" required class="form-control"
                   value="{{ prirazeni.datum_prideleni|date:'Y-m-d' }}">
        </div>

        <div class="mb-3">
            <label for="popis" class="form-label">Popis:</label>
            <textarea name="popis" id="popis" rows="3" required class="form-control">{{ prirazeni.popis }}</textarea>
        </div>

        <div class="d-flex justify-content-between">
            <a href="{% url 'homepage' %}?detail_zamestnanci={{ prirazeni.zakazka.id }}" class="btn btn-secondary">
                Zpět
            </a>
            <button type="submit" class="btn btn-primary">Uložit změny</button>
        </div>
    </form>
</div>

<script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
</body>
</html>
