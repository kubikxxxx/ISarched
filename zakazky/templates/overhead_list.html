{% load static %}
<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>Režijní náklady – sazby</title>
  <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
</head>
<body class="p-3">
  <div class="container" style="max-width: 860px;">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h4 class="mb-0">Režijní sazby (Kč / hod)</h4>
      <a href="{% url 'homepage' %}" class="btn btn-outline-secondary btn-sm">← Zpět</a>
    </div>

    <div class="row g-3">
      <div class="col-md-6">
        <div class="card">
          <div class="card-header">Přidat / upravit sazbu</div>
          <div class="card-body">
            <form method="post">
              {% csrf_token %}
              <div class="mb-2">{{ form.valid_from.label_tag }}{{ form.valid_from }}</div>
              <div class="mb-2">{{ form.rate_per_hour.label_tag }}{{ form.rate_per_hour }}</div>
              <div class="mb-2">{{ form.note.label_tag }}{{ form.note }}</div>
              <button class="btn btn-primary">Uložit</button>
            </form>
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="card">
          <div class="card-header">Historie sazeb</div>
          <div class="card-body">
            <table class="table table-sm">
              <thead><tr><th>Platí od</th><th class="text-end">Sazba</th><th>Pozn.</th><th></th></tr></thead>
              <tbody>
                {% for r in rates %}
                  <tr>
                    <td>{{ r.valid_from|date:"j.n.Y" }}</td>
                    <td class="text-end">{{ r.rate_per_hour|floatformat:2 }} Kč/h</td>
                    <td>{{ r.note }}</td>
                    <td><a href="{% url 'overhead_edit' r.id %}" class="btn btn-sm btn-outline-primary">Upravit</a></td>
                  </tr>
                {% empty %}
                  <tr><td colspan="4" class="text-muted text-center">Zatím žádné sazby.</td></tr>
                {% endfor %}
              </tbody>
            </table>
            <div class="text-muted small">Pro výpočet použijeme pro každý den sazbu s nejbližším „Platí od ≤ den“.</div>
          </div>
        </div>
      </div>
    </div>

  </div>
  <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
</body>
</html>
